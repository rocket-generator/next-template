# 管理者ページのフィルタとテーブルの改善

# /admin/users のフィルタとテーブルの改善


## 1. ソートのアイコン

管理画面の DataTableにおいて、ソートのアイコンを変更する。

現在はソート可能なときは上下の矢印のアイコンだが、実際にソートをするとキャレットみたいなやつに急に変わる。これは一貫性がなくあまり良くない。ソート可能なときの上下の矢印がわかりやすいので、ソート可能だがソートされていないときはこのままでグレー表示、ソートをしているときは、このアイコンの形はそのままで、ソート方向を表す矢印の色を黒にする、というようにしたい。

## 2. セルのアラインメントの改善

ataTableの一覧ページのアラインメント（左、中央、右）は、

- 文字列は左寄せ
- 数値は右寄せ
- 論理値は中央寄せ

というルールにする。

/users の一覧ページについても、このルールに従ってアラインメントを統一できている状態にしましょう。





## 追記: 実装計画（2026-01-21）

### 背景
- DataTable のソートアイコンが「未ソート＝上下矢印 / ソート中＝キャレット」に切り替わり、見た目の一貫性が欠けている。
- 一覧テーブルのセル/見出しのアラインメントが型に応じて統一されておらず、視認性とスキャン性が落ちる。

### 方針とその理由
- **DataTable コンポーネント側で一元対応**することで、/admin/users だけでなく今後の管理画面にも同じルールが適用され、保守性が高い。
- **型ベースのアラインメント**（文字列=左、数値=右、論理値=中央）を DataTable に集約し、各ページでの個別調整を不要にする。
- **上下矢印の形は維持し、色で状態を表現**することで、未ソート/ソート中の視認性を保ちつつ一貫した UI になる。
- 既存の DataTable 構造（type/options）を崩さず、**最小限の拡張（例: number 型の追加/align オプション）**で対応する。

### 具体的なタスク
- [ ] 既存実装の把握: `src/components/organisms/DataTable/index.tsx` と関連コンポーネント（DataTextItem/DataLinkItem/DataDateTimeItem）を再確認し、現状のクラス付与箇所とソートアイコン切替ロジックを整理する。
- [ ] ソートアイコン仕様の確定: 未ソート時=上下矢印グレー、ソート時=上下矢印のうち方向側のみ黒を再現する UI 実装案（上下2アイコンを縦に配置し色を分ける等）を決定する。
- [ ] DataTable にアラインメント判定ロジックを追加:
  - column.type を基準に `left | right | center` を決めるヘルパーを用意する。
  - 既定: text/array/link/datetime = left, boolean = center, number = right。
  - 必要に応じて `column.options.align` などの上書き手段を用意する（将来拡張用）。
- [ ] DataTable のヘッダー/セルクラスを更新:
  - `th` と `td` の両方にアラインメントクラス（`text-left/right/center`）を適用する。
  - ソートリンクの `flex` 配置もアラインメントに合わせて `justify-*` を切替し、アイコン位置が崩れないようにする。
- [ ] ソートアイコン描画を更新:
  - 未ソート時は上下矢印をグレーで表示。
  - ソート時は上下矢印のうち該当方向のみ黒（もう片方はグレー）になるようクラスを付ける。
  - 既存の `ChevronUp/ChevronDown` 切替は撤去する。
- [ ] Storybook のサンプル構造を調整:
  - 数値列（例: age, price）は `type: "number"` 等を付与し、右寄せが確認できるようにする。
  - 既存の boolean 列は中央寄せになることを確認する。
- [ ] テスト追加/更新（ガイドライン準拠）:
  - DataTable に `data-testid` を追加し、ヘッダー/セルのアラインメントとソートアイコン状態を検証できるようにする。
  - `__tests__/components/organisms/DataTable.test.tsx`（新規）を作成し、型別アラインメント・ソート状態の表示を確認するテストを書く。
- [ ] 動作確認:
  - Storybook で未ソート/ソート状態のアイコン表示とアラインメントの見え方を確認する。
  - /admin/users 画面で実際の表示が崩れていないことを確認する。
